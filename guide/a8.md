# A8

自作主张的时候。



+ RemoveComplexOpera
+ FlattenSet

功能不变，将 value 完全移除。

移除之后，

tail    => (alloc trim)
           (mref trim trim)
effect  => (mset! trim trim trim)
        => (set! sym (alloc size))
        => (set! sym (mref base offset))


+ ImposeCallingConvention

tail 处的 alloc
```rs
(alloc usize) => (begin
                    (set! ra ap)
                    (set! ap (+ ap usize)))
```

tail 处的 mref 像 atom 那样处理

effect 处的 alloc

```rs
(set! uvar (alloc usize)) => (begin
                                (set! uvar ap)
                                (set! ap (+ ap usize)))
```

effect 处的 mref 不做处理

effect 处的 mset! 不做处理

liveset 应当包含 ALLOCATION_REGISTER

+ UncoverFrameConflict